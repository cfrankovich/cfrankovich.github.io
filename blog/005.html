<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1">
	<title>/blog/005</title>
	<link rel="stylesheet" href="../style.css"/>
	<link rel="icon" href="../imgs/catspin.gif"/>
</head>

<body>
	<img id="bgimg" src="../imgs/stars.gif">

	<div class="contentbox" style="margin-top: 3%">
		<b><p style="text-align: center; font-size: 24px;">/blog/005</p></b>
		<p style="text-align: center; font-size: 14px"><a class="link" href="./catalog">[Catalog View]</a> <a class="link" href="../home">[Back]</a></p>
	</div>

	<!-- Make a script that adds a blog for you! -->

	<div class="contentbox">
		<p><b>carson</b> 02/08/22(Tue)00:09:36 <a class="link" href="./005">No.005</a></p>
		<p style="padding-bottom: 5px">File: <u><a class="link" href="../imgs/thoughtscriptss.png">thoughtscriptss.png</a></u> (524 KB, 639x644)</p>
		<a target="_blank" href="../imgs/thoughtscriptss.png"><img class="blogimg" src="../imgs/thoughtscriptss.png"></a>
		<p>
		Today was the first time I worked on a script for an extended period of time to make something easier. The something is uploading thoughts to my <a class="bloglink" href="../thoughts">>>>/thoughts/</a> page.
		Yes, it does seem like a simple task but this is literally the first time I've written a bash script this long. It was the first time I've used sed outside of vim and I tried to not write horrible code.
		<br></br>
		The process began when I got home from school and as I was doing my homework, I took breaks in between to work on the script which was a HORRIBLE IDEA! 
		I was literally trying something new and breaking my thought process as I'm learning. Never doing that again.
		<br></br>
		If you would like to void my horrible explanation of the code, just look bellow and you'll find the massive chunk of code I use to upload thoughts.
		<br></br>
		Essentially, upon running the program, I can either use the standard input or arguments I pass it which contain the message.
		The things that I look out for in the message are <span class="code">\n</span>(newline), <span class="code">></span>, and <span class="code"><</span>.
		<br></br>
		These special characters dictate new lines and quotes within the message or text I want to post.
		I replace all the new lines with br's with <span class="code">sed -z "s/\n/br/g"</span> (except i use the angle brackets too) so there are new lines in the message.
		After this, the script turns into an anomaly by looping through each character of the message and when I reach the angled brackets, I replace it with the html syntax to make it green.
		The "closing" angle bracket is used to conclude the quote instead of a new line.
		<br></br>
		After the finding and replacing is done, I simply just replace the file with the new one and push the changes to github. If you want to see the code go to the full blog page which is at <a class="bloglink" href="./005">>>/blog/005/</a> if you're interested.
		<br></br>
		The script is really useful and typing/editing html is a big pain in the rear so I'm planning to replicate this but for the blog and music section of the site too.
		<br></br>
		Full Code:
		<br>
		<pre class="code">
#!/usr/bin/env bash

# Super scuffed script #
# Please lmk about any improvements #

DIR="/root/Documents/cfrankovich.github.io/"
FILE="${DIR}thoughts.html"
FILETMP="${DIR}thoughts.html.tmp"
ITER=0
GITPW=$(cat /root/.gittoken) # tfw storing passwords in plain text #

[ -n "$1" ] && OGCONTENT=$(echo -en $@ | sed -z "s/\n/NeWlInE/g") 
[ -z "$1" ] && OGCONTENT=$(sed -z "s/\n/NeWlInE/g" /dev/stdin) 

# Replace ">green text" with "&ltspan class="greentext">>green text&lt/span>" #
CONTENT=""
while read char; do 
	if [ "$char" == ">" ]; then
		CONTENT="${CONTENT}&ltspan class=\"greentext\">>"
	elif [ "$char" == "&lt" ]; then
		CONTENT="${CONTENT}&lt/span>"
	elif [ "$char" == "" ]; then
		CONTENT="${CONTENT} "
	else 
		CONTENT="${CONTENT}${char}"
	fi
done &lt &lt(fold -w1 &lt&lt&lt "$OGCONTENT")

CONTENT=$(echo -en $CONTENT | sed -z "s/NeWlInE/&ltbr>/g")

while read -r line; do
	if [ $ITER -eq 26 ]; then
		echo -ne "\n&ltdiv class=\"contentbox\">\n" >> $FILETMP
		echo -ne "&ltb>$(date "+%m/%d/%Y(%a)%T")&lt/b>\n" >> $FILETMP
		echo -ne "&ltp>${CONTENT}&lt/p>\n&lt/div>\n\n" >> $FILETMP
	elif [ $ITER -eq 17 ]; then
		echo -ne "&ltp style=\"text-align: center; font-size: 14px\">Last Update: $(date "+%m/%d/%Y") " >> $FILETMP
		echo -ne "&lta class=\"link\" href=\"../home\">[Back]&lt/a>&lt/p>\n" >> $FILETMP
	else
		echo $line >> $FILETMP 
	fi
	ITER=$(($ITER + 1))
done &lt$FILE

mv $FILETMP $FILE

cd $DIR 
git add thoughts.html
git commit -m "[Bot] Uploading new thought"
git push https://cfrankovich:${GITPW}@github.com/cfrankovich/cfrankovich.github.io.git

		</pre>
		</p>
	</div>


</body>

</html>
